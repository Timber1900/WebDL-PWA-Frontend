{"version":3,"sources":["components/Queue/Item/index.tsx","components/Queue/index.tsx","components/Input/style.ts","components/Queue/style.ts","components/Queue/Item/style.ts","components/Quality/style.ts","components/KebabMenu/index.tsx","Constants.ts","components/Input/index.tsx","components/InfoLabel/style.ts","components/InfoLabel/index.tsx","components/Layout/index.tsx","styles/global.ts","App.tsx","index.tsx"],"names":["changeTitle","curQueue","setCurQueue","Outer","styled","div","Input","input","Submit","button","QueueContainer","ButtonsContainer","NavDiv","NavLabel","label","NavSpan","span","DropdownContent","VideoOptions","Container","PlayItem","props","show","ImagePreview","Image","img","NameContainer","Separator","hr","KebabMenu","xmlns","height","viewBox","width","d","fill","Item","titleLabel","useRef","useState","Title","setTitle","ext","setExt","useEffect","src","Thumbnail","ref","onBlur","current","scrollLeft","onClick","e","setAttribute","focus","document","addEventListener","stopRenameEnter","event","target","key","innerHTML","replace","removeEventListener","stopRename","renameVideo","defaultValue","onChange","value","disabled","AUDIO_URL","Queue","items","setItems","val","window","localStorage","setItem","JSON","stringify","download","a","curItems","i","func","res","rej","curItem","dataArray","push","axios","post","url","Info","webpage_url","onDownloadProgress","prg","console","log","loaded","responseType","Promise","all","then","sort","b","data","size","audioData","videoData","ffmpeg","createFFmpeg","progress","load","fetchFile","FS","run","out","fileStream","streamSaver","createWriteStream","writableStrategy","undefined","readableStrategy","writer","getWriter","write","close","catch","finally","filter","bind","length","downloadAudio","down","audioBlob","arrayBuffer","buffer","view","Uint8Array","this","map","Format","Progress","inputRef","getInfo","infoResponse","newQueue","parsedData","info","bestFormat","quality","formats","format","newItem","thumbnail","title","type","ILabel","InfoLabel","setInfo","Layout","createGlobalStyle","App","URL","location","href","searchParams","get","storage","parse","getItem","fetch","method","mode","cache","headers","body","json","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0d22f632.chunk.js","sourcesContent":["import React, { FC, useEffect, useRef, useState } from 'react';\r\nimport {\r\n  PlayItem,\r\n  ImagePreview,\r\n  Image,\r\n  NameContainer,\r\n  VideoOptions,\r\n  Container,\r\n  DropdownContent,\r\n  Separator,\r\n} from './style';\r\nimport { Outer } from '../../Quality/style';\r\n// import Quality from '../../Quality';\r\nimport KebabMenu from '../../KebabMenu';\r\nimport { item } from '../index';\r\n\r\nlet changeTitle: React.Dispatch<React.SetStateAction<string>>;\r\n\r\nconst renameVideo = function (e: any) {\r\n  e.setAttribute('contenteditable', true);\r\n  e.focus();\r\n  const label = e;\r\n  function stopRenameEnter(event: any) {\r\n    if (event.target === label && event.key === 'Enter') {\r\n      label.innerHTML.replace(/\\n/g, '');\r\n      label.setAttribute('contenteditable', false);\r\n      document.removeEventListener('keydown', stopRenameEnter);\r\n      changeTitle(label.innerHTML);\r\n    }\r\n  }\r\n  function stopRename() {\r\n    label.setAttribute('contenteditable', false);\r\n    label.removeEventListener('focusout', stopRename);\r\n    changeTitle(label.innerHTML);\r\n  }\r\n  document.addEventListener('keydown', stopRenameEnter);\r\n  e.addEventListener('focusout', stopRename);\r\n};\r\n\r\nconst Item: FC<item> = (props: item) => {\r\n  // const { id, merge, /*clips,*/ i, duration } = props;\r\n  const titleLabel = useRef(null);\r\n  const [, setTitle] = useState(props.Title);\r\n  // const [qual, setQual] = useState<string>(props.quality.entries().next().value[0]);\r\n  const [show, ] = useState(true);\r\n  const [ext, setExt] = useState('mkv');\r\n  // const refs: any = [titleLabel];\r\n\r\n  useEffect(() => {\r\n    changeTitle = setTitle;\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if (outQueue && outQueue[props.i]) outQueue[props.i].curQual = qual;\r\n  // }, [qual, props]);\r\n\r\n  // useEffect(() => {\r\n  //   if (outQueue && outQueue[props.i]) outQueue[props.i].ext = ext;\r\n  // }, [ext, props]);\r\n\r\n  // const dv = () => {\r\n  //   // @ts-ignore: Object is possibly 'null'.\r\n  //   const format = props.quality.get(qual);\r\n  //   const callback = () => {\r\n  //     const removedQueue = outQueue.filter((e) => e.id !== props.id);\r\n  //     updateQueue(removedQueue);\r\n  //   };\r\n  //   if (Math.sign(parseInt(ext)) === -1) {\r\n  //     let container: string = ext === '-3' ? 'mkv' : ext === '-2' ? 'mp4' : 'webm';\r\n  //     downloadVideo(id, callback, title, merge, format, container, clips, duration);\r\n  //   } else {\r\n  //     let container: string = ext === '1' ? 'mp3' : 'm4a';\r\n  //     downloadAudio(id, callback, title, container, clips, duration);\r\n  //   }\r\n  // };\r\n\r\n  // const setActive = (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => {\r\n  //   const res = refs.filter((val: any) => val.current === e.target || val === e.target);\r\n  //   if (res.length) {\r\n  //     setShow(!show);\r\n  //     outQueue[props.i].download = !show;\r\n  //   }\r\n  // };\r\n\r\n  // const fullmin = props.duration / 60;\r\n  // const hours = Math.floor(fullmin / 60);\r\n  // const min = Math.floor(fullmin - hours * 60);\r\n  // const sec = Math.floor(props.duration - min * 60);\r\n\r\n  // const h =\r\n  //   hours.toString().length > 1 ? hours.toString() : hours.toString().length > 0 ? '0' + hours.toString() : '00';\r\n  // const m = min.toString().length > 1 ? min.toString() : min.toString().length > 0 ? '0' + min.toString() : '00';\r\n  // const s = sec.toString().length > 1 ? sec.toString() : sec.toString().length > 0 ? '0' + sec.toString() : '00';\r\n\r\n  return (\r\n    <Container /*onClick={setActive}*/>\r\n      <PlayItem\r\n        // @ts-ignore: Object is possibly 'null'.\r\n        show={show}\r\n      >\r\n        <ImagePreview>\r\n          <Image src={props.Thumbnail} />\r\n        </ImagePreview>\r\n        <NameContainer\r\n          ref={titleLabel}\r\n          onBlur={() => {\r\n            // @ts-ignore: Object is possibly 'null'.\r\n            titleLabel.current.scrollLeft = 0;\r\n          }}\r\n        >\r\n          {props.Title}\r\n        </NameContainer>\r\n        <VideoOptions>\r\n          <KebabMenu />\r\n          <DropdownContent>\r\n            <label onClick={() => renameVideo(titleLabel.current)}>Rename video</label>\r\n            {/* <Trim hh={h} mm={m} ss={s} clips={clips} i={i} key={ID()} /> */}\r\n            <label /*onClick={dv}*/>Download video</label>\r\n            <Separator />\r\n            {/* <Quality quality={props.quality} setQual={setQual} /> */}\r\n            <Outer>\r\n              <label>Filetype:</label>\r\n              <select defaultValue={ext} onChange={(e) => setExt(e.target.value)}>\r\n                <optgroup label=\"Video\">\r\n                  <option value={-3}>mkv</option>\r\n                  <option value={-2}>mp4</option>\r\n                  <option value={-1} disabled={true}>\r\n                    webm\r\n                  </option>\r\n                </optgroup>\r\n                <optgroup label=\"Audio\">\r\n                  <option value={1} disabled={true}>\r\n                    mp3\r\n                  </option>\r\n                  <option value={2}>m4a</option>\r\n                </optgroup>\r\n              </select>\r\n            </Outer>\r\n          </DropdownContent>\r\n        </VideoOptions>\r\n      </PlayItem>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { Outer, QueueContainer, ButtonsContainer, NavSpan, NavLabel, NavDiv } from './style';\r\nimport Item from './Item';\r\nimport streamSaver from 'streamsaver'\r\n// import { changeSearch, searchIsUp } from '../Search/index';\r\nimport axios from 'axios';\r\nimport { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\r\nimport { AUDIO_URL, VIDEO_URL } from '../../Constants';\r\n\r\nexport let curQueue: Array<item>;\r\nexport let setCurQueue: React.Dispatch<React.SetStateAction<item[]>>;\r\n\r\nexport interface item {\r\n  Thumbnail: string,\r\n  Title: string,\r\n  Info: any,\r\n  Format: any\r\n}\r\n\r\nexport let outExt: string;\r\n\r\nconst Queue: FC = () => {\r\n  const emptyQueue: Array<item> = [];\r\n  const [items, setItems] = useState(emptyQueue);\r\n  const [ext, setExt] = useState('-3');\r\n\r\n  useEffect(() => {\r\n    outExt = ext;\r\n  }, [ext]);\r\n\r\n  useEffect(() => {\r\n    curQueue = items;\r\n  }, [items])\r\n\r\n  useEffect(() => {\r\n    setCurQueue = (val) => {\r\n      const storage = window.localStorage;\r\n      storage.setItem('queue', JSON.stringify(val))\r\n      setItems(val)\r\n    };\r\n  }, [])\r\n\r\n  const download = async () => {\r\n    let curItems = [...items];\r\n    for(let i = 0; i < items.length; i++){\r\n      const func = function (this: item[], res: (value: unknown) => void, rej: (reason?: any) => void) {\r\n        const curItem = items[i]\r\n        const dataArray = [];\r\n\r\n        dataArray.push(axios.post<Blob>(VIDEO_URL, {url: curItem.Info.webpage_url}, {onDownloadProgress: prg => {console.log(`%c ${prg.loaded} bits of data loaded`, 'color: #4488FF')}, responseType: \"blob\"}))\r\n        dataArray.push(axios.post<Blob>(AUDIO_URL, {url: curItem.Info.webpage_url}, {onDownloadProgress: prg => {console.log(`%c ${prg.loaded} bits of data loaded`, 'color: #4488FF')}, responseType: \"blob\"}))\r\n\r\n        Promise.all(dataArray)\r\n        .then(async (res) => {\r\n          const [audioData, videoData] = res.sort((a, b) => a.data.size - b.data.size);\r\n          const ffmpeg = createFFmpeg({ progress: console.log });\r\n          await ffmpeg.load();\r\n          ffmpeg.FS('writeFile', 'audio.m4a', await fetchFile(audioData.data));\r\n          ffmpeg.FS('writeFile', 'video.mkv', await fetchFile(videoData.data));\r\n          await ffmpeg.run('-i', 'audio.m4a', '-i', 'video.mkv','-map', '0:a','-map', '1:v', '-c:v', 'copy', 'out.mkv');\r\n          const out = ffmpeg.FS('readFile', 'out.mkv');\r\n          const fileStream = streamSaver.createWriteStream(`${curItem.Title}.mkv`, {\r\n            size: audioData.data.size + videoData.data.size,\r\n            writableStrategy: undefined,\r\n            readableStrategy: undefined\r\n          })\r\n          const writer = fileStream.getWriter();\r\n          writer.write(out);\r\n          writer.close();\r\n        })\r\n        .catch(rej)\r\n        .finally(() => {\r\n          setItems(this.filter((val: any, i: any) => val !== curItem));\r\n          res(\"Done\")\r\n        });\r\n      }\r\n      await new Promise(func.bind(curItems))\r\n      }\r\n\r\n  }\r\n  const downloadAudio = async () => {\r\n    let curItems = [...items];\r\n    for(const curItem of items){\r\n      const down = async function (this: item[], res: (value: unknown) => void, rej: (reason?: any) => void) {\r\n        const audioBlob = await axios.post<Blob>(AUDIO_URL, {url: curItem.Info.webpage_url}, {onDownloadProgress: prg => {console.log(`%c ${prg.loaded} bits of data loaded`, 'color: #4488FF')}, responseType: \"blob\"})\r\n        const buffer = await audioBlob.data.arrayBuffer();\r\n        const view = new Uint8Array(buffer);\r\n\r\n        const fileStream = streamSaver.createWriteStream(`${curItem.Title}.m4a`, {\r\n          size: audioBlob.data.size,\r\n          writableStrategy: undefined,\r\n          readableStrategy: undefined\r\n        })\r\n        const writer = fileStream.getWriter();\r\n        writer.write(view);\r\n        writer.close();\r\n        setItems(this.filter((val: any, i: any) => val !== curItem));\r\n        res(\"Done\")\r\n      }\r\n      await new Promise(down.bind(curItems));\r\n    }\r\n  }\r\n  // const search = () => {\r\n  //   changeSearch(!searchIsUp);\r\n  // };\r\n\r\n  return (\r\n    <Outer>\r\n      <QueueContainer>\r\n        {items.map((val, i) => (\r\n          <Item\r\n            Format={val.Format}\r\n            Info={val.Info}\r\n            Thumbnail={val.Thumbnail}\r\n            Title={val.Title}\r\n            key={i}\r\n          />\r\n        ))}\r\n      </QueueContainer>\r\n      <ButtonsContainer>\r\n        <button onClick={download} /*disabled={disable}*/>\r\n          Download Video\r\n        </button>\r\n        <button onClick={downloadAudio} /*disabled={disable}*/>\r\n          Download Audio\r\n        </button>\r\n        <button onClick={() => {setCurQueue([])}}>\r\n          Clear Queue\r\n        </button>\r\n        <NavDiv>\r\n          <NavSpan>\r\n            <NavLabel>Filetype:</NavLabel>\r\n            <select defaultValue={ext} onChange={(e) => setExt(e.target.value)}>\r\n              <optgroup label=\"Video\">\r\n                <option value={-3}>mkv</option>\r\n                <option value={-2}>mp4</option>\r\n                <option value={-1} disabled={true}>\r\n                  webm\r\n                </option>\r\n              </optgroup>\r\n              <optgroup label=\"Audio\">\r\n                <option value={1} disabled={true}>\r\n                  mp3\r\n                </option>\r\n                <option value={2}>m4a</option>\r\n              </optgroup>\r\n            </select>\r\n          </NavSpan>\r\n        </NavDiv>\r\n        {/* <button onClick={() => setQueue([])} disabled={disable}> */}\r\n          {/* Clear queue */}\r\n        {/* </button> */}\r\n        {/* <button onClick={inputUrl}>Input url</button> */}\r\n        {/* <button onClick={search}>Search Youtube</button> */}\r\n        {/* <button onClick={() => addToQueue('PLKYU22RTU_BNQ-yXwT8rF94zBLGLy5iT-')}>Test</button> */}\r\n      </ButtonsContainer>\r\n    </Outer>\r\n  );\r\n};\r\n\r\nexport default Queue;\r\n","import styled from 'styled-components';\r\n\r\nexport const Outer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 90vw;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  min-height: 50px;\r\n  padding: 10px 5vw 0 5vw;\r\n`;\r\n\r\nexport const Inner = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 90vw;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  margin: 0.5vh 0.5vw;\r\n  flex: 1;\r\n  border: 2px solid var(--almost-black);\r\n  background-color: var(--black);\r\n  color: var(--white);\r\n  border-radius: 5px;\r\n  height: 1.5rem;\r\n`;\r\n\r\nexport const Submit = styled.button`\r\n  margin: 0.5vh 0.5vw;\r\n  height: 1.5rem;\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Outer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-direction: row;\r\n  width: 90vw;\r\n  height: calc(100vh - (110px + 4vh));\r\n  padding: 2vh 5vw;\r\n  z-index: 10;\r\n\r\n  @media only screen and (max-width: 660px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nexport const QueueContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-direction: column;\r\n  width: 58vw;\r\n  margin: 1vh 1vw 1vh 0;\r\n  border-radius: 5px;\r\n  border: 2px solid var(--almost-black);\r\n  overflow-y: scroll;\r\n\r\n  @media only screen and (max-width: 660px) {\r\n    margin: 1vh 1vw;\r\n    height: 100%;\r\n    width: 88vw;\r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    border-radius: 10px;\r\n    background-color: var(--black);\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    background-color: #181a1b;\r\n    width: 8px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 10px;\r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    background-color: #555;\r\n  }\r\n`;\r\n\r\nexport const ButtonsContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-direction: column;\r\n  width: 28vw;\r\n  padding: 1vh 1vw 1vh 1vw;\r\n\r\n  @media only screen and (max-width: 660px) {\r\n    width: 88vw;\r\n    height: fit-content;\r\n  }\r\n\r\n  > button {\r\n    height: 8vh;\r\n    min-height: 40px;\r\n\r\n    &:disabled {\r\n      background-color: var(--almost-black);\r\n    }\r\n  }\r\n`;\r\n\r\nexport const NavDiv = styled.div`\r\n  padding: 1vh 0;\r\n`;\r\n\r\nexport const NavLabel = styled.label`\r\n  display: block;\r\n`;\r\n\r\nexport const NavSpan = styled.span`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  width: max(28vw, 90px);\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const DropdownContent = styled.div`\r\n  display: block;\r\n  position: absolute;\r\n  background-color: var(--black);\r\n  min-width: 160px;\r\n  z-index: 2;\r\n  right: 0;\r\n  top: 35px;\r\n  border-radius: 10px;\r\n  border: var(--almost-black) solid 2px;\r\n  overflow: visible;\r\n  visibility: hidden;\r\n\r\n  > label {\r\n    padding: 5px 10px;\r\n    text-align: center;\r\n    display: block;\r\n  }\r\n\r\n  > label:hover {\r\n    background-color: var(--almost-black);\r\n  }\r\n`;\r\n\r\nexport const VideoOptions = styled.span`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 50px;\r\n  width: 24px;\r\n  visibility: hidden;\r\n\r\n  &:hover ${DropdownContent} {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nexport const Container = styled.span`\r\n  position: relative;\r\n`;\r\n\r\nexport const PlayItem = styled.div`\r\n  display: flex;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 80px;\r\n  min-height: 50px;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  border-bottom: 1px solid var(--almost-black);\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  background-color: ${(props) => {\r\n    // @ts-ignore: Object is possibly 'null'.\r\n    return props.show ? 'var(--almost-black)' : 'var(--black)';\r\n  }};\r\n\r\n  &:hover ${VideoOptions} {\r\n    visibility: visible;\r\n  }\r\n\r\n  &:hover {\r\n    background-color: var(--dark-grey);\r\n  }\r\n\r\n  &:active {\r\n    background-color: var(--regular-grey);\r\n  }\r\n`;\r\n\r\nexport const ImagePreview = styled.span`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 5px;\r\n`;\r\n\r\nexport const Image = styled.img`\r\n  width: 115px;\r\n  height: 64px;\r\n  border-radius: 2px;\r\n`;\r\n\r\nexport const NameContainer = styled.span`\r\n  line-height: 20px;\r\n  font-family: Roboto;\r\n  font-size: 16px;\r\n  color: var(--white);\r\n  flex-grow: 1;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n\r\n  &:focus {\r\n    text-overflow: initial;\r\n  }\r\n`;\r\n\r\nexport const Separator = styled.hr`\r\n  display: block;\r\n  height: 1px;\r\n  border: 0;\r\n  border-top: 1px solid var(--dark-grey);\r\n  margin: 0.05em 0;\r\n  padding: 0;\r\n`;\r\n\r\nexport const Placeholder = styled.span`\r\n  height: 50px;\r\n  width: 24px;\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Outer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 27px;\r\n  margin: 2px;\r\n  line-height: 26px;\r\n\r\n  > label {\r\n    padding: 5px 10px;\r\n    text-align: center;\r\n    display: block;\r\n  }\r\n`;\r\n","import React, { FC } from 'react';\r\n\r\nconst KebabMenu: FC = () => {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path\r\n        d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\r\n        fill=\"#e8e6e3\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default KebabMenu;\r\n","export const VIDEO_URL = 'https://api.web-dl.live/video';\r\nexport const AUDIO_URL = 'https://api.web-dl.live/audio';\r\nexport const INFO_URL = 'https://api.web-dl.live/info';\r\nexport const VIDEO_URL_DEV = 'http://localhost:8080/video';\r\nexport const AUDIO_URL_DEV = 'http://localhost:8080/audio';\r\nexport const INFO_URL_DEV = 'http://localhost:8080/info';\r\n","import React from 'react';\r\nimport { Outer, Input, Submit } from './style';\r\nimport {curQueue, item, setCurQueue} from '../Queue'\r\nimport axios from 'axios';\r\nimport { INFO_URL } from '../../Constants';\r\n\r\nconst Progress = () => {\r\n  let inputRef: HTMLInputElement;\r\n\r\n  const getInfo = async () => {\r\n    const infoResponse = await axios.post(INFO_URL, { url: inputRef.value }, {onDownloadProgress: prg => {console.log(`%c ${prg.loaded} bits of data loaded`, 'color: #4488FF')}, responseType: 'json'})\r\n    console.log(infoResponse)\r\n    const newQueue = [...curQueue]\r\n    const parsedData = infoResponse.data;\r\n    for(const info of parsedData){\r\n      let bestFormat = {quality: -1};\r\n      for(const format of info.formats) {\r\n        if(format.quality > bestFormat.quality){\r\n          bestFormat = format;\r\n        }\r\n      }\r\n      console.log(info)\r\n      const newItem: item = {\r\n        Info: info,\r\n        Thumbnail: info.thumbnail,\r\n        Title: info.title,\r\n        Format: bestFormat\r\n      };\r\n      newQueue.push(newItem)\r\n    }\r\n    setCurQueue(newQueue);\r\n  }\r\n\r\n  return (\r\n    <Outer>\r\n      <Input type='text' ref={ref => {if(ref) inputRef = ref}}/>\r\n      <Submit onClick={getInfo}>Add to queue</Submit>\r\n    </Outer>\r\n  );\r\n};\r\n\r\nexport default Progress;\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  width: 90vw;\r\n  height: 50px;\r\n  padding: 0 5vw 0 5vw;\r\n`;\r\n\r\nexport const ILabel = styled.label``;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { Container, ILabel } from './style';\r\n\r\nexport let updateInfo: React.Dispatch<React.SetStateAction<string>>;\r\nexport let curInfo: string;\r\n\r\nconst InfoLabel: FC = () => {\r\n  const [info, setInfo] = useState('Waiting for download');\r\n\r\n  useEffect(() => {\r\n    updateInfo = setInfo;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    curInfo = info;\r\n  }, [info]);\r\n\r\n  return (\r\n    <Container>\r\n      <ILabel>{info}</ILabel>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default InfoLabel;\r\n","import React from 'react';\r\nimport Progress from '../Input';\r\nimport Queue from '../Queue';\r\nimport InfoLabel from '../InfoLabel';\r\n// import Search from '../Search/index';\r\n\r\nconst Layout = () => {\r\n  return (\r\n    <>\r\n      <Progress />\r\n      <Queue />\r\n      <InfoLabel />\r\n      {/* <Search /> */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import { createGlobalStyle } from 'styled-components';\r\n\r\nexport default createGlobalStyle`\r\n* {\r\n    margin: 0;\r\n    padding: 0;\r\n    color: var(--white);\r\n    font-family: Roboto;\r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    border-radius: 10px;\r\n    background-color: var(--black);\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    background-color: #181a1b;\r\n    width: 8px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 10px;\r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    background-color: #555;\r\n  }\r\n\r\n  button {\r\n    appearance: button;\r\n    text-rendering: auto;\r\n    color: var(--white);\r\n    letter-spacing: normal;\r\n    word-spacing: normal;\r\n    text-transform: none;\r\n    text-indent: 0px;\r\n    text-shadow: none;\r\n    display: inline-block;\r\n    text-align: center;\r\n    align-items: flex-start;\r\n    cursor: default;\r\n    background-color: var(--dark-grey);\r\n    box-sizing: border-box;\r\n    margin: 0em;\r\n    font: 400 13.3333px Roboto;\r\n    padding: 1px 6px;\r\n    border-radius: 2px;\r\n    margin: 2px;\r\n    border: none;\r\n  }\r\n\r\n  button:hover {\r\n    background-color: var(--regular-grey);\r\n  }\r\n\r\n  button:active {\r\n    background-color: var(--light-grey);\r\n  }\r\n\r\n  button:focus {\r\n    outline: none;\r\n  }\r\n\r\n  select {\r\n    appearance: button;\r\n    text-rendering: auto;\r\n    color: var(--white);\r\n    letter-spacing: normal;\r\n    word-spacing: normal;\r\n    text-transform: none;\r\n    text-indent: 0px;\r\n    text-shadow: none;\r\n    display: inline-block;\r\n    text-align: center;\r\n    align-items: flex-start;\r\n    cursor: default;\r\n    background-color: var(--dark-grey);\r\n    box-sizing: border-box;\r\n    margin: 0em;\r\n    font: 400 13.3333px Roboto;\r\n    padding: 1px 6px;\r\n    border-radius: 2px;\r\n    margin: 2px;\r\n    border: none;\r\n  }\r\n\r\n  select:hover {\r\n    background-color: var(--regular-grey);\r\n  }\r\n\r\n  select:active {\r\n    background-color: var(--light-grey);\r\n  }\r\n\r\n  select:focus {\r\n    outline: none;\r\n    background-color: var(--dark-grey);\r\n  }\r\n\r\n\r\n  html {\r\n    width: 100vw;\r\n    height: 100vh;\r\n  }\r\n\r\n  body {\r\n    background-color: var(--black);\r\n    overflow: hidden;\r\n    padding: 0;\r\n    margin: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n  }\r\n\r\n  :root {\r\n    --white: #e8e6e3;\r\n    --almost-white: #CED4DA;\r\n    --light-grey: #ADB5BD;\r\n    --regular-grey: #6C757D;\r\n    --dark-grey: #495057;\r\n    --almost-black: #343A40;\r\n    --black: #212529;\r\n    --blue: #48cae4;\r\n  }\r\n`;\r\n","import React, { useEffect } from 'react';\r\nimport Layout from './components/Layout'\r\nimport GlobalStyles from './styles/global';\r\nimport {setCurQueue, item} from './components/Queue';\r\n\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    const url = new URL(window.location.href).searchParams.get('text');\r\n    const storage = window.localStorage;\r\n    const newQueue: Array<item> = JSON.parse(storage.getItem('queue') || \"[]\");\r\n    if(url) {\r\n      // fetch(`http://localhost:8080/info`, {\r\n      fetch(`https://api.web-dl.live/info`, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ url })\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        const parsedData = res;\r\n        for(const item of parsedData){\r\n          const { info } = item;\r\n          let bestFormat = {quality: -1};\r\n\r\n          for(const format of info.formats) {\r\n            if(format.quality > bestFormat.quality){\r\n              bestFormat = format;\r\n            }\r\n          }\r\n\r\n          console.log(info)\r\n          const newItem: item = {\r\n            Info: info,\r\n            Thumbnail: info.thumbnail,\r\n            Title: info.title,\r\n            Format: bestFormat\r\n          };\r\n          newQueue.push(newItem)\r\n        }\r\n      })\r\n      .finally(() => {\r\n        setCurQueue(newQueue);\r\n      })\r\n    }\r\n    setCurQueue(newQueue);\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <Layout />\r\n      <GlobalStyles />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}